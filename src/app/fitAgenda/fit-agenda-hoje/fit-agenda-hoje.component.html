<!-- Container principal do calend√°rio -->
<div class="calendar-container">
  <!-- Loading overlay -->
  <div class="loading-overlay" [class.visible]="isLoading">
    <div class="loading-spinner"></div>
    <p>Carregando agenda...</p>
  </div>

  <!-- Header padr√£o do sistema -->
  <header class="agenda-header">
    <div class="agenda-header-content">
      <div style="display: flex; align-items: center; gap: 1rem;">
        <h1 class="agenda-title" style="margin-bottom: 0;">
          <span class="agenda-emoji">üìÖ</span>
          <span>Agenda de Hoje</span>
        </h1>
      </div>
      <div class="agenda-date">
        {{ today | date:'dd/MM/yyyy, EEEE' : '' : 'pt-BR' }}
      </div>
    </div>
    <div class="agenda-stats-and-btn">
      <div class="agenda-stats">
        <div class="stat-item">
          <span class="stat-number">{{ eventCount }}</span>
          <span class="stat-label">Agendamentos</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">{{ freeSlots }}</span>
          <span class="stat-label">Dispon√≠vel</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Calend√°rio -->
  <div class="agenda-proximos-calendar">
    <full-calendar
      #calendar
      [options]="calendarOptions"
      class="fc-custom"
    ></full-calendar>
  </div>

  <!-- Legenda de cores -->
  <div class="calendar-legend">
    <h4>Tipos de Servi√ßo</h4>
    <div class="legend-items">
      <div class="legend-item">
        <span class="legend-color" style="background: #1976d2;"></span>
        <span>Consulta</span>
      </div>
      <div class="legend-item">
        <span class="legend-color" style="background: #388e3c;"></span>
        <span>Avalia√ß√£o</span>
      </div>
      <div class="legend-item">
        <span class="legend-color" style="background: #f57c00;"></span>
        <span>Treino</span>
      </div>
      <div class="legend-item">
        <span class="legend-color" style="background: #7b1fa2;"></span>
        <span>Nutri√ß√£o</span>
      </div>
    </div>
  </div>

  <!-- Modal de detalhes do evento -->
  <div class="modal-overlay" [class.visible]="showModal" (click)="closeModal()">
    <div class="event-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <div class="modal-title-group">
          <i class="icon-calendar-check"></i>
          <h3>Detalhes do Agendamento</h3>
        </div>
        <button class="close-button" (click)="closeModal()">
          <i class="icon-close">√ó</i>
        </button>
      </div>

      <div class="modal-content" *ngIf="selectedEvent">
        <div class="event-info">
          <div class="info-row">
            <strong>Cliente:</strong>
            <span>{{ selectedEvent.title }}</span>
          </div>
          <div class="info-row">
            <strong>Servi√ßo:</strong>
            <span class="service-badge">{{ selectedEvent.service || 'N√£o informado' }}</span>
          </div>
          <div class="info-row">
            <strong>Descri√ß√£o:</strong>
            <span>{{ selectedEvent.description || 'N√£o informado' }}</span>
          </div>
          <div class="info-row">
            <strong>Hor√°rio:</strong>
            <span>{{ formatDateTime(selectedEvent.start) }} - {{ formatDateTime(selectedEvent.end) }}</span>
          </div>
          <div class="info-row" *ngIf="selectedEvent.notes">
            <strong>Observa√ß√µes:</strong>
            <span>{{ selectedEvent.notes }}</span>
          </div>
        </div>

        <div class="modal-actions">
          <button class="btn-secondary" (click)="closeModal()">
            Fechar
          </button>
          <button class="btn-primary">
            Editar
          </button>
          <button class="btn-danger" (click)="deleteAppointment(+selectedEvent.id)">
            Excluir
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
