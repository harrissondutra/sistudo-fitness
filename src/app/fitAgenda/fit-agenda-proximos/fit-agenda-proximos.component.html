<!-- Container principal do calendÃ¡rio -->
<div class="calendar-container">
  <!-- CabeÃ§alho -->
  <header class="agenda-header">
    <div class="agenda-header-content">
      <div style="display: flex; align-items: center; gap: 1rem;">
        <h1 class="agenda-title" style="margin-bottom: 0;">
          <span class="agenda-emoji">ðŸ“…</span>
          <span>Agendamentos</span>
        </h1>
        <a [routerLink]="['/fit-agenda/create']" class="btn-new-appointment" title="Novo agendamento" style="margin-left:0.7rem;">
          <span class="material-icons">add</span>
          <span class="btn-new-label">Novo</span>
        </a>
      </div>



    </div>
    <div class="agenda-stats-and-btn">
      <div class="agenda-stats">
        <div class="stat-item">
          <span class="stat-number">{{ totalAppointments }}</span>
          <span class="stat-label">Total</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">{{ availableSlotsToday }}</span>
          <span class="stat-label">DisponÃ­veis hoje</span>
        </div>
      </div>
    </div>
  </header>

  <!-- CalendÃ¡rio -->
  <div class="agenda-proximos-calendar">
    <ng-container *ngIf="eventsLoaded">
      <full-calendar #calendar [options]="calendarOptions"></full-calendar>
      <!-- ForÃ§a o CSS para quebra de linha e tooltip nos eventos -->
      <style>
        .fc-event-title {
          white-space: normal !important;
          word-break: normal !important;
          overflow-wrap: break-word !important;
          line-break: normal !important;
          hyphens: none !important;
        }
        .fc-event {
          cursor: pointer;
        }
        .custom-tooltip-event {
          position: absolute;
          z-index: 9999;
          background: #222;
          color: #fff;
          padding: 0.7em 1.1em;
          border-radius: 8px;
          font-size: 1rem;
          font-family: 'Montserrat', 'Roboto', sans-serif;
          box-shadow: 0 4px 16px rgba(0,0,0,0.18);
          pointer-events: none;
          min-width: 180px;
          max-width: 320px;
          white-space: pre-line;
        }
      </style>

    </ng-container>

  </div>

  <!-- Legenda -->
  <div class="calendar-legend">
    <h4>Legenda</h4>
    <div class="legend-items">
      <div class="legend-item" *ngFor="let status of legendStatus">
        <span class="legend-color" [ngStyle]="{ 'background-color': getStatusColor(status) }"></span>
        <span>{{ status | titlecase }}</span>
      </div>
    </div>
  </div>
</div>
