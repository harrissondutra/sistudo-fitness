/* user-list.component.scss */

@use 'sass:math';

$shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
$shadow-md: 0 4px 12px rgba(0, 0, 0, 0.12);
$transition: all 0.3s ease;

@mixin flex-between-center { display: flex; justify-content: space-between; align-items: center; }
@mixin flex-center-col { display: flex; flex-direction: column; align-items: center; }
@mixin flex-end-gap($gap) { display: flex; justify-content: flex-end; gap: $gap; }

.user-list-container {
  padding: var(--spacing-lg); max-width: 1400px; margin: var(--spacing-lg) auto;
  background: var(--background-color); border-radius: var(--border-radius-md);
  box-shadow: $shadow-md; box-sizing: border-box;

  .header {
    @include flex-between-center; margin-bottom: calc(var(--spacing-lg) / 1.5);
    .title-section {
      h2 { font-size: var(--font-size-xxl); color: var(--text-color); margin: 0 0 var(--spacing-xs) 0; font-weight: 600; }
      .subtitle { color: var(--text-secondary-color); font-size: var(--font-size-md); margin: 0; }
    }
    .new-user-btn {
      padding: var(--spacing-xs) var(--spacing-lg); border-radius: var(--border-radius-sm); font-weight: 500;
      mat-icon { margin-right: var(--spacing-xs); }
    }
  }

  .search-section {
    margin-bottom: var(--spacing-lg);
    .search-input {
      width: 100%; max-width: 500px;
      ::ng-deep {
        .mat-form-field-wrapper { margin: 0; padding: 0; }
        .mat-form-field-flex {
          background: var(--background-light); border-radius: var(--spacing-xs);
          padding: 0 var(--spacing-md);
        }
        .mat-form-field-outline { display: none; }
      }
    }
  }

  .table-container {
    background: var(--background-color); border-radius: var(--border-radius-md);
    overflow: hidden; box-shadow: $shadow-sm; overflow-x: auto;

    table { width: 100%; min-width: 800px; }

    th.mat-header-cell {
      background: var(--background-light); color: var(--text-color); font-weight: 600;
      padding: var(--spacing-md); white-space: nowrap; font-size: var(--font-size-sm);
      &:first-child { background-color: #E8EAF6; border-right: 1px solid #CFD8DC; }
      &.mat-sort-header:hover { background: #E8EAF6; }
    }

    td.mat-cell {
      padding: var(--spacing-md); color: var(--text-color);
      border-bottom: 1px solid #E8EAF6; font-size: var(--font-size-sm);
      &:first-child {
        font-family: 'Roboto Mono', monospace; color: var(--text-secondary-color);
        font-weight: 500; background-color: var(--background-light);
        border-right: 1px solid #E8EAF6;
      }
    }

    .user-row:hover { background: var(--background-light); }

    .user-id {
      font-family: 'Roboto Mono', monospace; color: var(--text-secondary-color); font-weight: 500;
      padding: calc(var(--spacing-xs) / 2) var(--spacing-xs);
      background-color: var(--background-light); border-radius: var(--border-radius-sm);
      display: inline-block;
    }

    .user-info {
      display: flex; align-items: center; gap: var(--spacing-sm);
      .user-name { font-weight: 500; color: var(--text-primary); }
    }

    .user-email { color: var(--text-secondary-color); font-size: var(--font-size-sm); }
    .metric-value { font-weight: 500; color: var(--primary-color); }

    .action-buttons {
      @include flex-end-gap(var(--spacing-xs));
      button { transition: transform .2s ease; &:hover { transform: scale(1.1); } }
    }

    .no-data {
      padding: calc(var(--spacing-lg) * 2) 0;
      .no-data-content {
        @include flex-center-col; gap: var(--spacing-md); color: #90A4AE;
        mat-icon { font-size: 48px; width: 48px; height: 48px; }
        p { font-size: 1.1em; margin: 0; }
      }
    }
  }

  mat-paginator { border-top: 1px solid #E8EAF6; background: var(--background-color); }
}

/* --- Media Queries --- */

@media screen and (max-width: 768px) {
  .user-list-container {
    padding: var(--spacing-md); margin: var(--spacing-md);
    border-radius: var(--border-radius-sm); box-shadow: $shadow-sm;
  }
  .header {
    flex-direction: column; gap: var(--spacing-md); align-items: flex-start;
    margin-bottom: var(--spacing-lg);
    .title-section {
      h2 { font-size: var(--font-size-xl); }
      .subtitle { font-size: var(--font-size-md); }
    }
    .new-user-btn {
      width: 100%; justify-content: center;
      height: 44px; line-height: 44px; padding: 0 var(--spacing-md);
    }
  }
  .search-section .search-input { max-width: 100%; }
  .table-container {
    border-radius: var(--spacing-xs);
    table { min-width: 550px; }
    th.mat-header-cell, td.mat-cell {
      padding: var(--spacing-sm); font-size: var(--font-size-sm); white-space: normal;
    }
    .action-buttons {
      gap: calc(var(--spacing-xs) / 2);
      button {
        width: 32px; height: 32px; line-height: 32px;
        .mat-icon { font-size: var(--font-size-lg); width: var(--font-size-lg); height: var(--font-size-lg); }
      }
    }
  }
  mat-paginator .mat-paginator-container { flex-wrap: wrap; justify-content: center; padding: var(--spacing-sm); }
}

@media screen and (max-width: 480px) {
  .user-list-container {
    padding: calc(var(--spacing-sm) / 1.2); margin: var(--spacing-xs);
  }
  .header {
    .title-section {
      h2 { font-size: var(--font-size-xl); }
      .subtitle { font-size: var(--font-size-sm); }
    }
    .new-user-btn {
      height: 38px; font-size: var(--font-size-sm);
      .mat-icon { font-size: var(--font-size-md); width: var(--font-size-md); height: var(--font-size-md); }
    }
  }
  .search-section mat-form-field .mat-form-field-wrapper { font-size: var(--font-size-sm); }
  .table-container {
    table { min-width: 450px; }
    th.mat-header-cell, td.mat-cell {
      padding: calc(var(--spacing-xs) / 1.5);
      font-size: var(--font-size-xs);
    }
    .action-buttons {
      button {
        width: 26px; height: 26px; line-height: 26px;
        .mat-icon { font-size: var(--font-size-sm); width: var(--font-size-sm); height: var(--font-size-sm); }
      }
    }
  }
  mat-paginator { padding: var(--spacing-xs); font-size: var(--font-size-xs); }
}
