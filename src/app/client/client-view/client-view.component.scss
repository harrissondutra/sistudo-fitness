/* trainning-container.scss */

@use 'sass:math';

// Variáveis de Cores (ajustadas conforme o tema Material Design fornecido)
$primary-color: #3f51b5;
$accent-color: #ff4081;
$warn-color: #f44336;
$text-color: #1a237e; // Cor para títulos e textos principais (mais escura)
$light-text-color: #666; // Cor para subtítulos e textos secundários
$border-color: #e0e0e0;
$background-light: #f5f5f5; // Cor de fundo principal
$white: #fff; // Cor para elementos com fundo branco
$lighter-primary: #e8eaf6; // Um tom mais claro da cor primária
$info-item-background: #f8f9fa; // Fundo para info-item
$info-item-hover-background: #e8eaf6; // Fundo para info-item no hover

// Variáveis de Espaçamento
$spacing-unit: 8px;
$padding-small: $spacing-unit * 2; // 16px
$padding-medium: $spacing-unit * 3; // 24px
$margin-medium: $spacing-unit * 3; // 24px
$gap-sections: $spacing-unit * 3; // 24px, para espaçamento entre seções principais
$gap-info-grid: $spacing-unit * 2.5; // 20px, para espaçamento dentro do info-grid

// Mixins para reutilização de estilos
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-between-center {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

@mixin card-shadow {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); /* Sombra padrão para cards e seções */
}

/* Garante que padding e bordas sejam incluídos no cálculo da largura/altura */
html {
  box-sizing: border-box;
}
*, *::before, *::after {
  box-sizing: inherit;
}

.trainning-container {
  padding: $padding-medium; /* 24px */
  max-width: 1200px;
  margin: 0 auto;
  background-color: $background-light; /* #f5f5f5 */
  min-height: 100vh; /* Garante que o container ocupe a altura total da viewport */
}

.header {
  display: flex;
  align-items: center;
  margin-bottom: $spacing-unit * 4; /* 32px */
  background: $white;
  padding: $padding-medium; /* 24px */
  border-radius: $spacing-unit * 1.5; /* 12px */
  @include card-shadow;

  .client-avatar {
    width: $spacing-unit * 7.5; /* 60px */
    height: $spacing-unit * 7.5; /* 60px */
    border-radius: 50%;
    overflow: hidden;
    margin-right: $spacing-unit * 2.5; /* 20px */
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: $lighter-primary;
    flex-shrink: 0; /* Impede o encolhimento do avatar */

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    mat-icon {
      font-size: $spacing-unit * 5; /* 40px */
      width: $spacing-unit * 5;
      height: $spacing-unit * 5;
      color: $primary-color;
    }
  }

  .header-content {
    h1 {
      margin: 0;
      font-size: 28px;
      color: $text-color;
      font-weight: 500;
    }

    .subtitle {
      margin: $spacing-unit 0 0; /* 8px 0 0 */
      color: $light-text-color;
      font-size: 16px;
    }
  }
}

.content {
  display: flex; /* Usar flexbox para empilhar as rows */
  flex-direction: column;
  gap: $gap-sections; /* 24px de espaçamento entre as linhas do dashboard */
  margin-bottom: $spacing-unit * 4; /* 32px */
}

/* Layout para as linhas do dashboard */
.dashboard-row {
  display: grid;
  gap: $gap-sections; /* 24px de espaçamento entre os cards dentro da linha */
  align-items: flex-start; /* Alinha o conteúdo dos cards no topo */

  /* Garantir que as seções dentro de uma linha de dashboard preencham a altura */
  .info-section,
  .exercises-section {
    /* Removido height: 100% para evitar sobreposição em conteúdo variável */
    min-width: 0; /* Permite que o item do grid encolha além do seu conteúdo mínimo intrínseco */
  }
}

.dashboard-row-top {
  /* No desktop: Informações Pessoais (1/3) e Medidas Atuais (2/3) */
  /* Ajustado para repeat(auto-fit, minmax) para melhor flexibilidade e ajuste */
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
}

.dashboard-row-bottom {
  /* No desktop: Treino Atual e Histórico de Treinos (ocupam a largura total e se dividem igualmente) */
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Divide em colunas flexíveis */
}

/* Estilos gerais para as seções de informação e exercícios */
.info-section,
.exercises-section {
  background: $white;
  border-radius: $spacing-unit * 1.5; /* 12px */
  padding: $padding-medium; /* 24px */
  @include card-shadow;
  transition: transform 0.2s ease;

  &:hover {
    transform: translateY(-2px);
  }

  h2 {
    display: flex;
    align-items: center;
    margin: 0 0 $padding-medium; /* 24px */
    font-size: 20px;
    color: $text-color;
    font-weight: 500;

    mat-icon {
      margin-right: $spacing-unit * 1.5; /* 12px */
      color: $primary-color;
      background: $lighter-primary;
      padding: $spacing-unit * 0.75; /* 6px */
      border-radius: 50%;
    }
  }
}

.info-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Ajustado minmax para maior flexibilidade */
  gap: $gap-info-grid; /* 20px */
}

.info-item {
  background: $info-item-background; /* #f8f9fa */
  padding: $padding-small; /* 16px */
  border-radius: $spacing-unit; /* 8px */
  transition: background-color 0.2s ease;

  &:hover {
    background: $info-item-hover-background; /* #e8eaf6 */
  }

  .label {
    display: block;
    font-size: 14px;
    color: $light-text-color;
    margin-bottom: $spacing-unit; /* 8px */
    font-weight: 500;
    word-break: break-word; /* Garante quebra de texto em palavras longas */
  }

  .value {
    font-size: 16px;
    color: $text-color;
    font-weight: 500;
    word-break: break-word; /* Garante quebra de texto em palavras longas */
  }
}

/* Estilos específicos para a lista de exercícios dentro da seção de treino atual */
.current-training-details {
  h3 {
    font-size: 1.1rem;
    color: $primary-color;
    margin-bottom: $spacing-unit * 1.5; /* 12px */
  }

  ul {
    list-style: none; /* Remove marcadores de lista padrão */
    padding: 0;
    margin: 0;
  }

  li {
    background: #f0f4f8; /* Fundo ligeiramente diferente para os itens da lista */
    padding: $spacing-unit * 1.25 $spacing-unit * 1.875; /* 10px 15px */
    border-radius: $spacing-unit * 0.75; /* 6px */
    margin-bottom: $spacing-unit; /* 8px */
    font-size: 0.95rem;
    color: #333;
    display: flex;
    flex-wrap: wrap; /* Permite quebrar linha em telas menores */
    align-items: center;
    gap: $spacing-unit; /* 8px Espaçamento entre os spans */

    &:last-child {
      margin-bottom: 0;
    }

    strong {
      color: $text-color;
    }
  }
}

.no-training {
  @include flex-center;
  flex-direction: column;
  gap: $padding-small;
  color: $light-text-color;
  padding: $padding-medium 0; /* Reduzido o padding para consistência */

  mat-icon {
    font-size: $spacing-unit * 6;
    width: $spacing-unit * 6;
    height: $spacing-unit * 6;
    margin-bottom: $spacing-unit;
    color: $border-color;
  }

  p {
    margin: 0;
    font-size: 1.1em;
    text-align: center;
  }

  .assign-training-button {
    min-width: 120px;
    background: $primary-color;
    color: $white;
    border: none;
    border-radius: $spacing-unit * 0.75; /* 6px */
    padding: $spacing-unit $padding-small; /* 8px 16px */
    cursor: pointer;
    font-size: $padding-small; /* 16px */
    transition: background-color 0.2s ease;

    &:hover {
      background: darken($primary-color, 10%);
    }

    mat-icon {
      margin-right: $spacing-unit;
    }
  }
}


/* Estilos para a tabela de histórico de treinos */
.training-history-table-wrapper {
  overflow-x: auto; /* Permite scroll horizontal em telas menores */
  width: 100%; /* Garante que o wrapper ocupe a largura total */

  .training-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: $spacing-unit * 2; /* 16px */

    th,
    td {
      text-align: left;
      padding: $spacing-unit * 1.5; /* 12px */
      border-bottom: 1px solid $border-color;
      color: $text-color;
    }

    th {
      background-color: #f0f0f0;
      font-weight: 600;
      color: $light-text-color;
    }

    tr:last-child td {
      border-bottom: none;
    }

    tbody tr:hover {
      background-color: $lighter-primary;
    }

    td:last-child {
      white-space: nowrap; /* Evita que os botões quebrem linha */
    }
  }
}

.no-data-row {
  text-align: center;
  padding: $padding-medium;
  color: $light-text-color;
  font-size: 1.1em;
}


.loading-spinner {
  @include flex-center;
  flex-direction: column;
  padding: $padding-medium * 2;
  gap: $padding-small;
  color: $light-text-color;
  text-align: center;
  mat-spinner { /* Adicionado para garantir que o spinner não seja esmagado */
    flex-shrink: 0;
  }
}

/* Responsividade */
@media (max-width: 768px) {
  .trainning-container {
    padding: $padding-small; /* 16px */
  }

  .header {
    padding: $padding-small; /* 16px */
    margin-bottom: $padding-medium; /* 24px */
    flex-direction: column; /* Empilha itens em telas menores */
    align-items: flex-start; /* Alinha o conteúdo à esquerda */

    .client-avatar {
      margin-right: 0;
      margin-bottom: $spacing-unit * 1.5; /* 12px */
      width: $spacing-unit * 6; /* 48px */
      height: $spacing-unit * 6; /* 48px */

      mat-icon {
        font-size: $spacing-unit * 4; /* 32px */
        width: $spacing-unit * 4;
        height: $spacing-unit * 4;
      }
    }

    .header-content {
      width: 100%;
      h1 {
        font-size: 24px;
      }
      .subtitle {
        font-size: 14px;
      }
    }
  }

  .content {
    gap: $padding-small; /* 16px */
  }

  .dashboard-row {
    grid-template-columns: 1fr; /* Colunas únicas, empilhadas */
    gap: $padding-small; /* 16px */
  }

  .info-section,
  .exercises-section {
    padding: $padding-small; /* 16px */

    h2 {
      margin-bottom: $padding-small; /* 16px */
      font-size: 18px;

      mat-icon {
        margin-right: $spacing-unit; /* 8px */
        font-size: 24px;
        width: 24px;
        height: 24px;
      }
    }
  }

  .info-grid {
    grid-template-columns: 1fr; /* Coluna única para itens de informação */
    gap: $spacing-unit * 1.5; /* 12px */
  }

  .info-item {
    padding: $spacing-unit * 1.5; /* 12px */
    .label {
      font-size: 13px;
      margin-bottom: $spacing-unit / 2; /* 4px */
    }
    .value {
      font-size: 15px;
    }
  }

  .current-training-details {
    h3 {
      font-size: 1rem;
      margin-bottom: $spacing-unit;
    }
    ul li {
      padding: $spacing-unit $spacing-unit * 1.5; /* 8px 12px */
      font-size: 0.9rem;
    }
  }

  .training-history-table-wrapper {
    .training-table {
      font-size: 0.9em;
      th, td {
        padding: $spacing-unit; /* 8px */
      }
    }
  }
}

@media (max-width: 480px) {
  .trainning-container {
    padding: $spacing-unit; /* 8px */
  }

  .header {
    padding: $spacing-unit; /* 8px */
    margin-bottom: $padding-small; /* 16px */

    .client-avatar {
      width: $spacing-unit * 5; /* 40px */
      height: $spacing-unit * 5; /* 40px */
      margin-bottom: $spacing-unit;
      mat-icon {
        font-size: $spacing-unit * 3.5; /* 28px */
        width: $spacing-unit * 3.5;
        height: $spacing-unit * 3.5;
      }
    }

    .header-content {
      h1 {
        font-size: 20px;
      }
      .subtitle {
        font-size: 12px;
      }
    }
  }

  .content {
    gap: $spacing-unit * 1.5; /* 12px */
  }

  .dashboard-row {
    gap: $spacing-unit * 1.5; /* 12px */
  }

  .info-section,
  .exercises-section {
    padding: $spacing-unit * 1.5; /* 12px */

    h2 {
      font-size: 16px;
      margin-bottom: $spacing-unit; /* 8px */
      mat-icon {
        font-size: 20px;
        width: 20px;
        height: 20px;
      }
    }
  }

  .info-item {
    padding: $spacing-unit; /* 8px */
    .label {
      font-size: 12px;
    }
    .value {
      font-size: 14px;
    }
  }

  .current-training-details {
    h3 {
      font-size: 0.9rem;
    }
    ul li {
      padding: $spacing-unit / 2 $spacing-unit; /* 4px 8px */
      font-size: 0.85rem;
    }
  }

  .training-history-table-wrapper {
    .training-table {
      th, td {
        padding: $spacing-unit * 0.75; /* 6px */
      }
    }
  }
  .no-training, .loading-spinner {
    padding: $padding-small;
    p {
      font-size: 0.9em;
    }
  }
}
