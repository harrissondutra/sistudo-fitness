<!-- Container Principal -->
<div class="trainning-list-container">
  <!-- Cabeçalho -->
  <div class="header">
    <div class="title-section">
      <h2>Lista de Treinos</h2>
      <p class="subtitle">Gerencie todos os treinos cadastrados no sistema</p>
    </div>
    <button mat-raised-button color="primary" (click)="createTrainning()">
      <mat-icon>add</mat-icon>
      Novo Treino
    </button>
  </div>

  <!-- Seção de Busca e Controles -->
  <div class="search-section">
    <div class="search-controls">
      <mat-form-field appearance="outline" class="search-input">
        <mat-label>Buscar por Treino ou Cliente</mat-label>
        <input matInput [formControl]="searchControl" placeholder="Digite nome do treino ou cliente">
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
      
      <!-- Controles de Cache -->
      <div class="cache-controls">
        <button mat-icon-button 
                (click)="refreshData()" 
                [disabled]="isRefreshing"
                matTooltip="Atualizar dados"
                color="primary">
          <mat-icon [class.spinning]="isRefreshing">refresh</mat-icon>
        </button>
        
        @if (lastUpdateTime) {
          <span class="last-update">
            Última atualização: {{ lastUpdateTime | date:'HH:mm:ss' }}
          </span>
        }
      </div>
    </div>
    
    <span class="search-tip">Dica: Use o nome do treino ou do cliente para buscar</span>
  </div>

  <!-- Lista de Treinos responsiva usando Ionic com ícones Material -->
  @if (filteredTrainnings && filteredTrainnings.length > 0) {
  <ion-list class="trainning-ionic-list mat-elevation-z2">
    @for (training of filteredTrainnings; track training) {
    <ion-item button (click)="getTrainningById(training.id?.toString() ?? '')" class="trainning-view">
      <ion-label>
        <div class="training-header">
          <h3>{{ training.name }}</h3>
          @if (training.client.name) {
            <span class="client-badge">{{ training.client.name }}</span>
          }
        </div>
        <p class="training-description">{{ training.description || 'Sem descrição' }}</p>
        @if (training.client.name) {
        <p class="client-name">
          <mat-icon class="client-icon">person</mat-icon>
          <span>{{ training.client.name || 'Sem cliente associado' }}</span>
        </p>
        }
      </ion-label>
      <div class="action-buttons" slot="end">
        <button mat-icon-button color="primary"
          (click)="editTrainning(training.id?.toString()); $event.stopPropagation();" matTooltip="Editar Treino">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button color="warn"
          (click)="deleteTrainning(training.id?.toString()); $event.stopPropagation();" matTooltip="Excluir Treino">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </ion-item>
    }
  </ion-list>
  }

  <!-- Mensagem quando não há dados -->
  @if (filteredTrainnings && filteredTrainnings.length === 0 && !isLoading) {
  <div class="no-data-content">
    <mat-icon>fitness_center</mat-icon>
    <p>Nenhum treino encontrado.</p>
  </div>
  }

  <!-- Indicador de carregamento (opcional) -->
  @if (isLoading) {
  <div class="loading-indicator">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Carregando treinos...</p>
  </div>
  }
</div><!-- Fechamento correto do container principal -->
