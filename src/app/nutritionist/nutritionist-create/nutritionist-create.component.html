<div class="nutritionist-update-container">
  <div class="header">
    <div class="title-section">
      <h2>Novo Nutricionista</h2>
      <p class="subtitle">Cadastre um novo nutricionista no sistema</p>
    </div>
  </div>

  <form [formGroup]="nutritionistForm" (ngSubmit)="onSubmit()" class="nutritionist-form mat-elevation-z2">
    <ion-list>
      <ion-item class="form-item">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nome Completo</mat-label>
          <input matInput formControlName="name" placeholder="Nome do nutricionista" required>
          @if (nutritionistForm.get('name')?.hasError('required') && nutritionistForm.get('name')?.touched) {
          <mat-error>O nome é obrigatório.</mat-error>
          }
        </mat-form-field>
      </ion-item>

      <ion-item class="form-item">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>E-mail</mat-label>
          <input matInput type="email" formControlName="email" placeholder="email@exemplo.com" required email>
          @if (nutritionistForm.get('email')?.hasError('required') && nutritionistForm.get('email')?.touched) {
          <mat-error>O e-mail é obrigatório.</mat-error>
          }
          @if (nutritionistForm.get('email')?.hasError('email') && nutritionistForm.get('email')?.touched) {
          <mat-error>Por favor, insira um e-mail válido.</mat-error>
          }
        </mat-form-field>
      </ion-item>

      <ion-item class="form-item">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Telefone</mat-label>
          <input matInput formControlName="phone" placeholder="(XX) XXXXX-XXXX">
        </mat-form-field>
      </ion-item>

      <ion-item class="form-item">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Especialidade</mat-label>
          <mat-select formControlName="specialty" required>
            @for (especialidade of especialidades; track especialidade.value) {
              <mat-option [value]="especialidade.value">
                {{ especialidade.viewValue }}
              </mat-option>
            }
          </mat-select>
          <mat-hint>Selecione a especialidade do nutricionista</mat-hint>
          <mat-error *ngIf="nutritionistForm.get('specialty')?.hasError('required')">
            A especialidade é obrigatória
          </mat-error>
        </mat-form-field>
      </ion-item>

      <ion-item class="form-item">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Registro CRN</mat-label>
          <input matInput formControlName="registry" placeholder="Ex: 12345/A">
          <mat-hint>Informe o registro profissional do nutricionista</mat-hint>
          <mat-error *ngIf="nutritionistForm.get('registry')?.hasError('required')">
            O registro CRN é obrigatório
          </mat-error>
        </mat-form-field>
      </ion-item>
    </ion-list>

    <div class="form-actions">
      <button mat-raised-button color="warn" type="button" (click)="onCancel()">
        <mat-icon>cancel</mat-icon>
        <span>Cancelar</span>
      </button>
      <button mat-raised-button color="primary" type="submit" [disabled]="nutritionistForm.invalid">
        <mat-icon>save</mat-icon>
        <span>Cadastrar Nutricionista</span>
      </button>
    </div>
  </form>
</div>
